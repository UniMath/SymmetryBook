%% packages
\usepackage{microtype}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[largesc,osf]{newpxtext}
\usepackage{newpxmath}
\let\pxopenbox\openbox % pxmath already has openbox but amsthm also defines it
\let\openbox\relax
\usepackage{amsmath} % must be before amsthm
\usepackage{amsthm}
\renewcommand*{\openbox}{\pxopenbox}
\usepackage{mathtools}          %to get \vcentcolon
\usepackage{thmtools}
\usepackage{xspace}
\usepackage{scalerel}           % to scale \div
\usepackage[all]{xy}
\usepackage{pgfplots,tikz,tikz-cd}
\pgfplotsset{compat=newest}
%\usepackage{soul} % for striking out, can be removed in the end
\usepackage{enumitem}
\usepackage{xifthen}

\usetikzlibrary{decorations.markings,decorations.pathreplacing,
  shapes.geometric,matrix,arrows,chains,positioning,scopes} 
        %,hobby} % for hobby splines
%% useful for debugging bezier paths
%\tikzset{%
%  show curve controls/.style={
%    postaction={
%      decoration={
%        show path construction,
%        curveto code={
%          \draw [blue] 
%            (\tikzinputsegmentfirst) -- (\tikzinputsegmentsupporta)
%            (\tikzinputsegmentlast) -- (\tikzinputsegmentsupportb);
%          \fill [red, opacity=0.5] 
%            (\tikzinputsegmentsupporta) circle [radius=.5ex]
%            (\tikzinputsegmentsupportb) circle [radius=.5ex];
%        }
%      },
%      decorate
%    }}}

%% mathtools does not define an extensible equal sign, so we do so here:
\makeatletter
\def\Equalfill@{\arrowfill@\Relbar\Relbar\Relbar}
\MHInternalSyntaxOn
\providecommand*\xEqual[2][]{%
  \ext@arrow 0055{\Equalfill@}{#1}{#2}}
\MHInternalSyntaxOff
\makeatother

%% resolve the long equal rendering issue with tikz-cd:
\makeatletter
\def\tikzcdequalsignoffset{0.1em}
% This helper macro finds the start and endpoints of a line between
% the source and target nodes and stores them in \sourcecoordinate and
% \targetcoordinate.
%
% #1 -- source node
% #2 -- target node
\def\findedgesourcetarget#1#2{
    \let\sourcecoordinate\pgfutil@empty
    \ifx\tikzcd@startanchor\pgfutil@empty % Check that the source doesn't have a specified anchor
        \def\tempa{\pgfpointanchor{#1}{center}}% if so, start by taking the center of that coordinate
    \else
        \edef\tempa{\noexpand\pgfpointanchor{#1}{\expandafter\@gobble\tikzcd@startanchor}} % If it has an anchor, use that
        \let\sourcecoordinate\tempa
    \fi
    \ifx\tikzcd@endanchor\pgfutil@empty % check that the target doesn't have a specified anchor
        \def\tempb{\pgfpointshapeborder{#2}{\tempa}}% if so, our end point is the point on the boundary of node b that is in the direction of our initial start coordinate
    \else
        \edef\tempb{\noexpand\pgfpointanchor{#2}{\expandafter\@gobble\tikzcd@endanchor}}% If it has a specified anchor, use that
    \fi
    \let\targetcoordinate\tempb
    \ifx\sourcecoordinate\pgfutil@empty%
        \def\sourcecoordinate{\pgfpointshapeborder{#1}{\tempb}}%
    \fi
}

\tikzset{myequal/.style = {
    -,
    to path={\pgfextra{
        \findedgesourcetarget{\tikzcd@ar@start}{\tikzcd@ar@target} % find endpoints
        % Rotate coordinate system so that line goes in x direction
        \ifx\tikzcd@startanchor\pgfutil@empty
            \def\tikzcd@startanchor{.center}
        \fi
        \ifx\tikzcd@endanchor\pgfutil@empty
            \def\tikzcd@endanchor{.center}
        \fi
        \pgfmathanglebetweenpoints{\pgfpointanchor{\tikzcd@ar@start}{\expandafter\@gobble\tikzcd@startanchor}}{\pgfpointanchor{\tikzcd@ar@target}{\expandafter\@gobble\tikzcd@endanchor}}
        \pgftransformrotate{\pgfmathresult}
        % Draw the two lines 
        \pgfpathmoveto{\pgfpointadd{\sourcecoordinate}{\pgfpoint{0}{\tikzcdequalsignoffset}}}
        \pgfpathlineto{\pgfpointadd{\targetcoordinate}{\pgfpoint{0}{\tikzcdequalsignoffset}}}
        \pgfpathmoveto{\pgfpointadd{\sourcecoordinate}{\pgfpoint{0}{-\tikzcdequalsignoffset}}}
        \pgfpathlineto{\pgfpointadd{\targetcoordinate}{\pgfpoint{0}{-\tikzcdequalsignoffset}}}
        \pgfusepath{draw}
}}}}

\makeatother
%%%


%% mathpazo does not define mapsfrom, so we do so here:
\def\mapsfrom{\pgfpicture\pgfsetbaseline{+0pt}\pgftransformxscale{-1}\pgftext[base]{$\mapsto$}\endpgfpicture}

\tikzset{
  dot/.style={fill,circle,inner sep=1pt},
  double line with arrow/.style args={#1,#2}{decorate,decoration={markings,%
    mark=at position 0 with {\coordinate (ta-base-1) at (0,1pt);%
      \coordinate (ta-base-2) at (0,-1pt);},%
    mark=at position 1 with {\draw[#1] (ta-base-1) -- (0,1pt);%
      \draw[#2] (ta-base-2) -- (0,-1pt);}%
  }},
  double line with arrow left/.style args={#1,#2}{decorate,decoration={markings,%
    mark=at position 0 with {\coordinate (ta-base-1) at (0,1pt);%
      \coordinate (ta-base-2) at (0,-1pt);},%
    mark=at position 0.3 with {\coordinate (ta-mid) at (0,4pt);},%
    mark=at position 0.7 with {\draw[->] (ta-mid) -- (0,4pt);},%
    mark=at position 1 with {\draw[#1] (ta-base-1) -- (0,1pt);%
      \draw[#2] (ta-base-2) -- (0,-1pt);}%
  }},
  double line with arrow right/.style args={#1,#2}{decorate,decoration={markings,%
    mark=at position 0 with {\coordinate (ta-base-1) at (0,1pt);%
      \coordinate (ta-base-2) at (0,-1pt);},%
    mark=at position 0.3 with {\coordinate (ta-mid) at (0,-4pt);},%
    mark=at position 0.7 with {\draw[->] (ta-mid) -- (0,-4pt);},%
    mark=at position 1 with {\draw[#1] (ta-base-1) -- (0,1pt);%
      \draw[#2] (ta-base-2) -- (0,-1pt);}%
  }},
  eq/.style={-,double line with arrow={-,-},outer sep=2pt.},
  eql/.style={-,double line with arrow left={-,-},outer sep=2pt,},
  eqr/.style={-,double line with arrow right={-,-},outer sep=2pt,}
}
\tikzcdset{
  arrow style=math font
}

% bibliography
\usepackage{hyphenat}
\usepackage[backref=true,
            style=verbose,
            autocite=footnote,
            backend=biber,
            bibencoding=utf8]{biblatex}
\addbibresource{papers.bib}
\let\cite\autocite
\DefineBibliographyStrings{english}{%
  backrefpage = {page},% originally "cited on page"
  backrefpages = {pages},% originally "cited on pages"
}

% hyperref should be the package loaded last
\usepackage[colorlinks,
            bookmarksnumbered=true,
            bookmarksdepth=2,
            bookmarksopenlevel=2,
            citecolor=linkcolor,
            linkcolor=linkcolor,
            urlcolor=linkcolor,
            unicode,
            pdfborderstyle=,
            pdfauthor={CAS},
            pdftitle={Symmetry},
            pdfsubject={Mathematics},
            pdfkeywords={type theory, group theory, univalence axiom}]{hyperref}
% - except for cleveref!
\usepackage[capitalize]{cleveref}
\definecolor{linkcolor}{rgb}{0,0,0.5}

%% Enable synctex
\pdfadjustspacing=1
\brokenpenalty=10000 %%% No hyphenation across page breaks
\synctex=1

%% macros
\newcommand*{\mytitle}{Symmetry}
\newcommand*{\myauthor}{}

\newcommand{\DELETE}[1]{} % no star on purpose: argument may contain \par

%%% Headers
%\pagestyle{headings}
\setcounter{secnumdepth}{1}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% THEOREMS
\declaretheoremstyle[headfont=\normalfont\scshape,bodyfont=\slshape]{cas-thm}
\declaretheoremstyle[headfont=\normalfont\scshape]{cas-def}
\declaretheorem[parent=section,style=cas-thm]{theorem}
\declaretheorem[sibling=theorem,style=cas-thm]{lemma}
\declaretheorem[sibling=theorem,style=cas-thm]{corollary}
\declaretheorem[sibling=theorem,style=cas-thm]{conjecture}
\declaretheorem[sibling=theorem,style=cas-thm]{axiom}
\declaretheorem[sibling=theorem,style=cas-thm]{construction}
\declaretheorem[sibling=theorem,style=cas-def]{definition}
\declaretheorem[sibling=theorem,style=cas-def]{remark}
\declaretheorem[sibling=theorem,style=cas-def]{example}
\declaretheorem[sibling=theorem,style=cas-def]{exercise}
\declaretheorem[sibling=theorem,style=cas-def,name=Exercise]{xca}
\declaretheorem[sibling=theorem,style=cas-def,name={}]{principle}

\numberwithin{equation}{section}
%% end
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand*{\arxiv}[1]{preprint available at \href{http://arxiv.org/abs/#1}{arXiv:#1}}

% save old div and equiv
\let\olddiv\div
\renewcommand*{\div}{{\mathord{\scaleobj{.5}{\olddiv}}}} %experimental

% Meta-macros for:
\newcommand*{\constant}[1]{\mathrm{#1}} % defined constants / functions : roman
\newcommand*{\constructor}[1]{\mathrm{#1}} % constructors : roman
\newcommand*{\typeformer}[1]{\mathrm{#1}} % (uppercase) typeformers : roman
\newcommand*{\btypeformer}[1]{\mathbf{#1}} % other type formers : bold roman
\newcommand*{\UU}{{\mathcal{U}}} % universes (special case) : calligraphic
\newcommand*{\UUp}{{\mathcal{U}_*}}

\newcommand*{\bn}[1]{\mathbf{#1}} % bold numerals (types)

% our version of \operatorname with a font change (so we can use the appropriate meta-macro)
\makeatletter
\newcommand*{\casop}[1]{\mathop{\newmcodes@\kern\z@ #1}\nolimits@}
\makeatother

% Typeformers
\newcommand*{\bool}{\typeformer{Bool}}
\newcommand*{\charstring}{\typeformer{String}}
\newcommand*{\integer}{\typeformer{Int}}
\newcommand*{\real}{\typeformer{Real}}
\newcommand*{\true}{\typeformer{True}}
\newcommand*{\false}{\typeformer{False}}
\newcommand*{\Prop}{\typeformer{Prop}}
\newcommand*{\Set}{\typeformer{Set}}
\newcommand*{\FinSet}{\typerformer{FinSet}}
\newcommand*{\GSet}[1][G]{\mathord{#1\textrm{-}\Set}}
\newcommand*{\Group}{\typeformer{Group}}
\newcommand*{\AbGroup}{\typeformer{AbGroup}}
\newcommand*{\Bunch}{\typeformer{Bunch}}
\newcommand*{\AbBunch}{\typeformer{AbBunch}}
\newcommand*{\Band}{\typeformer{Band}}
\newcommand*{\AbBand}{\typeformer{AbBand}}
\newcommand*{\Monoid}{\typeformer{Monoid}}
\newcommand*{\Tors}{\typeformer{Torsor}}

\newcommand*{\zet}{\typeformer{Z}} % the SET of integers
\newcommand*{\QQ}{\mathbb{Q}}
\newcommand*{\ZZ}{\mathbb{Z}}
\newcommand*{\NN}{\mathbb{N}}
\newcommand*{\CC}{\mathbb{C}}
\newcommand*{\RR}{\mathbb{R}}
\newcommand*{\emptytype}{\emptyset}

% Constructors
\newcommand*{\yes}{\constructor{yes}}
\newcommand*{\no}{\constructor{no}}
\newcommand*{\triv}{\constructor{triv}}
\newcommand*{\refl}[1]{\casop{\constructor{refl}_{#1}}}
\newcommand*{\rrfl}{\constructor{rrfl}}
\newcommand*{\inl}[1]{\casop{\constructor{inl}_{#1}}}
\newcommand*{\inr}[1]{\casop{\constructor{inr}_{#1}}}

% Functions and defined elements
\newcommand*{\refloi}[1]{\casop{\constant{refl}^{-o}_{#1}}} % exception
\newcommand*{\fact}{\casop{\constant{fact}}}
\newcommand*{\id}{\mathord{\constant{id}}}
\newcommand*{\pt}{\constant{pt}}
\newcommand*{\ad}{\constant{ad}}
\newcommand*{\symm}{\casop{\constant{symm}}}
\newcommand*{\trans}{\casop{\constant{trans}}}
\newcommand*{\trp}[2][]{\casop{\constant{trp}^{#1}_{#2}}}
\newcommand*{\fst}{\casop{\constant{fst}}}
\newcommand*{\snd}{\casop{\constant{snd}}}
\newcommand*{\zpos}{\casop{\constant{pos}}}
\newcommand*{\zneg}{\casop{\constant{neg}}}
\newcommand*{\zzero}{\casop{\constant{zero}}}
\newcommand*{\mZ}{\casop{\constant{m}}}
\newcommand*{\preim}{\casop{\constant{preim}}}
\newcommand*{\tot}{\casop{\constant{tot}}}
\newcommand*{\funext}{\casop{\constant{funext}}}
\newcommand*{\ptw}{\casop{\constant{ptw}}}
\newcommand*{\ap}[1]{\casop{\constant{ap}_{#1}}}
\newcommand*{\apd}[1]{\casop{\constant{apd}_{#1}}}
\newcommand*{\apap}[3]{\casop{\constant{apap}_{#1}(#2)(#3)}}
\newcommand*{\apc}{\casop{\constant{ap}{\ct}}}
\newcommand*{\ns}{\casop{\constant{ns}}}
\newcommand*{\ev}{\casop{\constant{ev}}}
\newcommand*{\ve}{\casop{\constant{ve}}} % cute: the inverse of \ev
\newcommand*{\el}{\mathrm{elim}} % another inverse of \ev ?!
\newcommand*{\permgrp}[1]{\Sigma_{{#1}}}%
\newcommand*{\cast}{\casop{\constant{cast}}}
\newcommand*{\etop}[1]{\bar {#1}}   % equivalence to path
\newcommand*{\ptoe}[1]{\tilde {#1}} % path to equivalence
\newcommand*{\ua}{\casop{\constant{ua}}} % univalence
\newcommand*{\cst}[1]{\casop{\constant{cst}}_{#1}} % constant function at
\newcommand*{\N}{\constant{N}} % normalizer

\newcommand*{\Aut}{\casop{\constant{Aut}}}
\newcommand*{\aut}{\Aut}
\newcommand*{\Out}{\casop{\constant{Out}}}
\newcommand*{\Inn}{\casop{\constant{Inn}}}
\newcommand*{\Ker}{\casop{\constant{Ker}}}
\renewcommand*{\ker}{\Ker}
\newcommand*{\Img}{\casop{\constant{Im}}}
\newcommand*{\image}{\Img}
\newcommand*{\Coker}{\casop{\constant{Coker}}}
\newcommand*{\coker}{\Coker}
\newcommand*{\Hom}{\casop{\mathrm{Hom}}}
\newcommand*{\Nor}{\constant{Nor}}
\newcommand*{\Sym}{\casop{\constant{Sym}}}
\newcommand*{\Card}{\casop{\constant{Card}}}
\newcommand*{\bunch}{\casop{\constant{bunch}}}
\newcommand*{\Ad}{\casop{\constant{Ad}}}
\newcommand*{\band}{\casop{\constant{band}}}
\newcommand*{\fiber}{\casop{\constant{fiber}}}
\newcommand*{\Succ}{\casop{\constant{succ}}}
\newcommand*{\fin}{\casop{\constant{Fin}}} % This is the operator, not the type, which is \FinSet
\newcommand*{\El}{\casop{\constant{El}}}
\newcommand*{\clf}{\casop{\constant{B}}} % classifying space operator (adds space)
\newcommand*{\B}{\constant{B}}            % without extra space
\newcommand*{\grpcenter}{\casop{\constant{Z}}}
\newcommand*{\im}{\casop{\constant{im}}}
\newcommand*{\iscontr}{\mathrm{isContr}}
\newcommand*{\isprop}{\mathrm{isProp}}
\newcommand*{\isset}{\mathrm{isSet}}
\newcommand*{\isgrpd}{\mathrm{isGrpd}}
\newcommand*{\isEq}{\mathrm{isEquiv}}
\newcommand*{\isonetype}{\mathrm{is1Type}}
\newcommand*{\isconn}{\mathrm{isConn}}

\newcommand*{\fundgrp}{\casop{\pi_1}}
\newcommand*{\fundgrpd}{\casop{\Pi_1}}

\newcommand*{\dg}[1]{\casop{\textcolor{red}{\delta_{#1}}}} % what is this?

% Latin abbreviations and initialisms
\newcommand*{\ie}{i.e.,\xspace}
\newcommand*{\eg}{e.g.,\xspace}
\newcommand*{\viz}{viz.,\xspace}

% disputed phrases
\newcommand*{\covering}{set bundle\xspace}
\newcommand*{\coverings}{set bundles\xspace}
\newcommand*{\Covering}{Set bundle\xspace}
\newcommand*{\Coverings}{Set bundles\xspace}
\newcommand*{\inftygp}{$\infty$-group\xspace}
\newcommand*{\aninftygp}{an $\infty$-group\xspace}
\newcommand*{\inftygps}{$\infty$-groups\xspace}

% relations
\let\oldequiv\equiv
\renewcommand*{\equiv}{\simeq}
\newcommand*{\weq}{\simeq}
\newcommand*{\we}{\xrightarrow{\sim}}
\newcommand*{\isom}{\cong}
\newcommand*{\liff}{\weq}
\newcommand*{\jdeq}{\oldequiv}
\newcommand*{\defeq}{\mathrel{\vcentcolon\jdeq}}
\newcommand*{\defequi}{\defeq} % definitionally equal
\newcommand*{\defis}{\mathrel{\vcentcolon=}}

% binary operations
\newcommand*{\ct}{*}
\newcommand*{\cto}{*_{\constant{o}}}
\newcommand*{\dblslash}{\mathbin{/\kern-3pt/}}

% paired delimiters (can change size via optional argument)
\DeclarePairedDelimiter\Trunc{\lVert}{\rVert} % truncated type
\DeclarePairedDelimiter\trunc{\lvert}{\rvert} % truncation constructor
\DeclarePairedDelimiter\merely{\lVert}{\rVert_{-1}}
\DeclarePairedDelimiter\angled{\langle}{\rangle}
\DeclarePairedDelimiter\Fin[]
\DeclarePairedDelimiter\set\lbrace\rbrace
\DeclarePairedDelimiterX\setof[2]\lbrace\rbrace{#1 \mid #2}

% special truncations and truncation constructors
\newcommand*{\nonempty}[1]{\Trunc{#1}}
\newcommand*{\setTrunc}[1]{{\Trunc{#1}}_0}
\newcommand*{\settrunc}[1]{{\trunc{#1}}_0}
\newcommand*{\grpdTrunc}[1]{{\Trunc{#1}}_1}
\newcommand*{\grpdtrunc}[1]{{\trunc{#1}}_1}

% footnote without number, no star: may contain \par
\newcommand\blfootnote[1]{%
  \begingroup
  \renewcommand\thefootnote{}\footnote{#1}%
  \addtocounter{footnote}{-1}%
  \endgroup}

% deprecated macros
\newcommand*{\princ}[1]{\constant{Pr}_{{#1}}}
\newcommand*{\pathsp}[1]{\constant{P}_{\!#1}} % NB negative thin space
\newcommand*{\uc}[1]{{\color{red}\pathsp{#1}}}%universal set bundle
\newcommand*{\abstrOp}{\casop{\constant{abst}}}
\newcommand*{\abstr}{\constant{abs}}
\newcommand*{\agp}[1]{\mathcal #1} %generic abstract group
\newcommand{\grpcenterinc}[1]{\mathfrak z_{{#1}}} % really ?!

\newcommand*{\pre}{\constant{pre}}%these may be open for discussion
\newcommand*{\preinv}{\constant{preinv}}
\newcommand*{\post}{\constant{post}}
\newcommand*{\adjoint}{\ad}
\newcommand*{\concr}{\constant{concr}}

%some special types
\newcommand*{\Gtorsor}{\Tors_G}
\newcommand*{\Xtorsor}[1]{\Tors_{#1}}%      added by MAB
\newcommand*{\Ztorsor}{\Xtorsor{\zet}}
\newcommand*{\TorZ}{{\constant{T}\ZZ}} % {\mathbf{TorZor}}% alternative: BZ.   
\newcommand*{\SetBundle}{\constant{SetBundle}}             % end MAB
\newcommand*{\typegroup}{\Group}
\newcommand*{\typeabgroup}{\AbGroup}
\newcommand*{\typesubgroup}{\constant{Sub}}%"gp" removed - is evident from the type of the subscript G
\newcommand*{\typenormal}{\constant{Nor}}
\newcommand*{\typeset}{\Set}
\newcommand*{\typeinftygp}{{\infty}\Group}
\newcommand*{\typemonoid}{\Monoid} 
\newcommand*{\typetorsor}{\Tors}
\newcommand*{\pttype}{\UUp}
\newcommand*{\typeabsgp}{\Group_{\textup{Abstract}}}
\newcommand*{\BSigma}{\B\Sigma}%previously \Set_{(S)} - the component of S:\Set
\newcommand*{\revers}{\constant{r}}
\newcommand*{\twist}{\constant{twist}}%loop in BC_2
\newcommand*{\Sc}{{\typeformer{S}^1}}%the circle
%\newcommand{\sbt}{\begin{picture}(-1,1)(-1,-3)\circle*{2}\end{picture}}%
\newcommand*{\sbt}{\tikz[anchor=base,baseline]{\node[scale=.7,inner
    sep=0, outer sep=0, circle]%
    {$\bullet$};}}%
\newcommand*{\base}{{\sbt}}%point in circle
\newcommand*{\Zloop}{\circlearrowleft} %was \mathrm{loop}}%MAB: loop TorZor
\newcommand*{\Sloop}{\circlearrowleft}%loop in circle

\newcommand*{\conncomp}[2]{{{#1}_{\left(#2\right)}}}%
\newcommand*{\univcover}[2]{{{#1}^0_{\left(#2\right)}}}%

\newcommand*{\blank}{\_}%
\newcommand*{\inv}[1]{#1^{-1}}%
\newcommand*{\ptdto}{\to_\ast}%
\newcommand*{\loopspace}[1][\null]{\operatorname{\Omega^{#1}}}

%% paths over paths
\newcommand*{\pathoverdisplay}[4]{{#1} \xEqual[#3]{#2} #4}
\newcommand*{\pathover}[4]{#1 =^{#2}_{#3} #4}

\newcommand*{\pair}{\casop{\constructor{pair}}}
\newcommand*{\rec}{\casop{\constant{rec}}}
\newcommand*{\ind}{\casop{\constant{ind}}}
\newcommand*\pathpair[2]{\overline{({#1},{#2})}}

%% Euclidean geometry

\newcommand*{\EE}{\mathbb E}
\newcommand*{\VV}{\mathbb V}
\newcommand*{\ES}{{\tilde \EE}}
\newcommand*{\OS}{{\tilde \VV}}
\newcommand*{\OrthGp}[1]{\constant{O}(#1)}
\newcommand*{\EucGp}[1]{\constant{E}(#1)}
\newcommand*{\Vectors}{\casop{\constant{Vec}}}
\newcommand*{\Points}{\casop{\constant{Pts}}}
\newcommand*{\typeRealVectorSpace}{\constant{Vect}_\RR}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Peter & Benedikt's macros for referring to coqdoc
% d2c4e86
% see https://tex.stackexchange.com/a/35314/ for help understanding the following:

\newcommand{\longhash}{e47ce20acce953129e34e021a10976ed27948a39}
\newcommand{\shorthash}{e47ce20}

%fragile, better to freeze with stable hash
\newcommand{\coqdocbasebaseurl}{https://unimath.github.io/doc/UniMath/\shorthash/}

%\coqident call are relative to this long path
\newcommand{\coqdocbaseurl}{\coqdocbasebaseurl UniMath.} 
\newcommand{\urlhash}{\#}

\newcommand{\coqdocurl}[2]{\coqdocbaseurl #1.html\urlhash #2}

%nolinkurl from url or hyperref package
\newcommand{\nolinkcoqident}[1]{\nolinkurl{#1}} % TODO: give better def for this?
\makeatletter
\newcommand{\coqident}{\begingroup\@makeother\#\@coqident}
\newcommand{\@coqident}[3][]{% empty default first and optional argument
  \ifthenelse{\isempty{#2}}% 
  {\nolinkcoqident{#3}}%           [optional]{}{printme}
  {\ifthenelse{\isempty{#1}}%
  {\href{\coqdocurl{#2}{#3}}{\nolinkcoqident{#3}}}% []{file}{identifier+printed}
  {\href{\coqdocurl{#2}{#3}}{\nolinkcoqident{#1}}}}% [printme]{file}{identifier}
\endgroup}
% optional argument allows link text to differ from link url
\newcommand{\coqfile}[2]{%
  \ifthenelse{\isempty{#1}}%
  {\href{\coqdocbaseurl #2.html}{#2.v}}%
  {\href{\coqdocbaseurl #1.#2.html}{#2.v}}} 
\makeatother

%sususe is a replacement for subsubsection.  sususe is the same as subsubsection but numbers correctly bid
%\newenvironment{sususe}[1]{\refstepcounter{theorem}%
%\vspace{.5\baselineskip}\par\medskip\noindent%
%{\normalfont\normalsize\bfseries{\thetheorem. #1}}%
%\vspace{.5\baselineskip}\newline}
\let\sususe\newthought

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "book"
%%% End:
